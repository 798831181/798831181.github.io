# java防止反编译技术方案介绍

### 

本文主要包括以下几个章节

- 首先介绍类的文件结构和类加载的过程
- 然后介绍混淆技术的java代码保护和示例
- 最后介绍基于加壳技术的保护方案。

## 类 文 件 结 构

#### classfinal

> https://gitee.com/roseboy/classfinal

- 使用方式

maven插件的方式

maven基本知识

生命周期、阶段和goal


阶段中会列一下目标，每个目标负责一个特定的任务。


https://juejin.cn/post/6919490393893502984

Ja v a 类文件是 8 位字节 的二进制流 。 数据项按顺序存储在类文件 中。


具体介绍参考

【1】基于java的软件保护技术研究



## 类加载器


## java代码保护策略

### 混淆技术

主要有三种方式：

1. 布局混淆

   > 布局 混靖也被称为 外 形 混淆 ， 是 混淆器 中 最 常采用 的 方式 。 所谓 布 局 混清 ， 是指通过删 除 字节码 文件 中 无用 的 调 试信 息 ， ’ 变更 函 数 、 变量 、 类名 、 接 口 名 称等方式 ， 使得反编 译得 到 的 源文件违 背 见 名 知 意 的 软件工程原 则 ， 从而达 到 混靖 的 目 的 。 

   

2. 数据混淆

   >  数据混淆 ， 即 是从程序 的 数据 结 构入手 ， 破坏程序 现有 的 合理 的 数 据 存 储方 式 ， 使之呈 现 出 人难 以 理解 的 、 错综复杂 的 数据 结 构 。 

3. 控制混淆

   > 控制 混淆通过 向 代码 中 添加 可 以 控制 的 判 断 条件 增 加 代码 的 复 杂 度 ， 也 可 以 通 过 改变稈序 的 判 断条件 ， 或者 调 整程序 的 结构域执行流程来增加 反编 译 的难度 。



示例：

proguard



### 加壳技术

>  加 密类 文件机制 。 所谓 加 密 类 文件保护 机制 ， 即 将程序的所有类文件通过对称加密或非对称加密，转换为不可执行 、不可反编译的乱码 。运行时动态解密并执行程序 。 



#### Java虚拟机如何加载加密过的Class文件？

- 通过Java agent实现
- 通过定制 ClassLoader实现



参考资料

https://github.com/daiqingliang/xjar-encrypt-demo

https://github.com/core-lib/xjar
